(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{360:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"会话跟踪"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#会话跟踪"}},[s._v("#")]),s._v(" 会话跟踪")]),s._v(" "),t("p",[s._v("会话跟踪是Web程序中常用的技术，用来跟踪用户的整个会话。保持对用户会话期间的数据管理。常用的会话跟踪技术是Cookie与Session。")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("Cookie")]),s._v(" 通过在 客户端记录 信息确定用户身份\n"),t("strong",[s._v("Session")]),s._v(" 通过在 服务器端记录 信息确定用户身份")])]),s._v(" "),t("h2",{attrs:{id:"cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" Cookie")]),s._v(" "),t("p",[s._v("Cookie是客户端请求服务器后，服务器发给客户端的⼀个辨认标识，保存在客户端，当客户端再次向服务器发送请求时，会携带着这个辨认标识，服务器就可以通过这个标识来识别 客户端的身份 或 状态等...")]),s._v(" "),t("h3",{attrs:{id:"cookie应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie应用"}},[s._v("#")]),s._v(" Cookie应用")]),s._v(" "),t("p",[t("strong",[s._v("应用步骤：")])]),s._v(" "),t("ol",[t("li",[s._v("存数据 实例 "),t("code",[s._v("Cookie对象")]),s._v("（String key, String value）")]),s._v(" "),t("li",[s._v("响应返回 "),t("code",[s._v("HttpServletResponse.addCookie(Cookie cookie)方法")]),s._v("  对指定的 "),t("code",[s._v("cookie对象")]),s._v("  进行添加至响应中(可多次添加数据)")]),s._v(" "),t("li",[s._v("客户端识别读取 ， "),t("code",[s._v("HttpServletRequest.getCookies()")]),s._v(" 获取 得到 "),t("code",[s._v("Cookies对象数组")])]),s._v(" "),t("li",[s._v("对其数组进行遍历 "),t("code",[s._v("cookie对象")]),s._v(" ，"),t("code",[s._v("Cookie.getName()方法")]),s._v(" 判断对应 保存的key 进行获取 value值")]),s._v(" "),t("li",[s._v("符合条件的 key 对其值进行 范围保存value值")])]),s._v(" "),t("p",[t("strong",[s._v("Cookie保存")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doPost")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" req "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletResponse")]),s._v(" resp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Post请求============"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getParameter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//创建保存 cookie对象")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),s._v(" cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uname"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//添加对象")]),s._v("\n        resp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addCookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("strong",[s._v("Cookie读取")])]),s._v(" "),t("div",{staticClass:"language-jsp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// 方式No.1\n<%\n    Cookie[] cookies = request.getCookies();\n    if (cookies != null) {\n      for (Cookie c : cookies) {\n        if (c.getName().equals("uname")) {\n          pageContext.setAttribute("uname",c.getValue());\n          break;\n        }\n      }\n    }\n%>\n\n// 方式No.2\n${cookie.<键名>.vlaue}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("strong",[s._v("Cookie定时销毁")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),s._v(" cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aaa"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置Cookie的有效时间为30s")]),s._v("\ncookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMaxAge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nresponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addCookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("Cookie中文编码")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 存数据前 将String 转换 编码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("URLEncoder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("encode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),s._v(" cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 取数据前 将String 反转 编码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("URLDecoder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("decode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("a",{attrs:{href:"http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/Cookie.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击Cookie更多方法"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletResponse.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击了解HttpServletResponse"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("注意：")])]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("未对Cookie有效时长设置 ，则Cookie在浏览器关闭自动销毁")]),s._v(" "),t("li",[s._v("Cookie数据 会保存在当前的客户端")]),s._v(" "),t("li",[s._v("Cookie不适保存隐私信息")])])]),s._v(" "),t("h2",{attrs:{id:"session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[s._v("#")]),s._v(" Session")]),s._v(" "),t("p",[s._v("Session是客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上的数据\nSession对象 对应的类为 "),t("code",[s._v("javax.servlet.http.HttpSession类")])]),s._v(" "),t("h3",{attrs:{id:"session应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session应用"}},[s._v("#")]),s._v(" Session应用")]),s._v(" "),t("p",[s._v("应用步骤：")]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("获取HttpSession对象，通过 "),t("code",[s._v("HttpServletRequest.getSession()方法")]),s._v(" 获取对象")]),s._v(" "),t("li",[s._v("保存对象属性，通过 "),t("code",[s._v("HttpSession.setAttribute(String key , String value)方法")]),s._v(" 存储数据")]),s._v(" "),t("li",[s._v("读取数据，通过"),t("code",[s._v("HttpSession.getAttribute(String key)方法")]),s._v(" 获取数据")])])]),s._v(" "),t("p",[t("a",{attrs:{href:"http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpSession.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击更多HttpSession方法"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击更多HttpServletRequest方法"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"session生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session生命周期"}},[s._v("#")]),s._v(" Session生命周期")]),s._v(" "),t("p",[s._v("Session保存在服务器端\nSession在用户第⼀次访问服务器的时候自动创建。需要注意只有访问JSP、Servlet等程序时才会创建 Session对象，只访问HTML、IMAGE等静态资源并不会创建Session")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/weixin_45963193/article/details/115662730#t4",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击了解Session生命周期"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("Session销毁操作有哪些？")])]),s._v(" "),t("ul",[t("li",[s._v("关闭服务器")]),s._v(" "),t("li",[s._v("session对象调用 invalidate()")]),s._v(" "),t("li",[s._v("session对象设置了自动销毁时间 session.setMaxInactiveInterval(60) （60s销毁）")]),s._v(" "),t("li",[s._v("session默认30min自动销毁（从你上一次访问服务器开始计时开始")])]),s._v(" "),t("div",{staticStyle:{background:"rgba(245, 108, 108,0.8)",border:"1px solid rgba(1, 1, 1,0.2)","border-radius":"8px",padding:"1px 12px"}},[t("p",{staticStyle:{"font-size":"20px"}}),t("p",{staticStyle:{"font-size":"20px"}},[t("b",[s._v("注意: ")]),s._v(" "),t("ul",[t("li",[s._v("Session对象 重定向/转发时，session数据不会丢失 (重定向请求数据会丢失)")]),s._v(" "),t("li",[s._v("Session 用于存储有意义的数据（减少服务器压力）")]),s._v(" "),t("li",[s._v("Session 有生命周期时长的限制（默认30min失效")])])])]),s._v(" "),t("h2",{attrs:{id:"session和cookie的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session和cookie的区别"}},[s._v("#")]),s._v(" Session和Cookie的区别")]),s._v(" "),t("ul",[t("li",[s._v("Cookie数据保存在客户端")]),s._v(" "),t("li",[s._v("Cookies不会占服务器资源")]),s._v(" "),t("li",[s._v("Session数据保存在服务器端")]),s._v(" "),t("li",[s._v("Session的客户端SessionID标识符，用存服务端的Session存储空间")])])])}),[],!1,null,null,null);t.default=n.exports}}]);